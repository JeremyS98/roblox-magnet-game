-- ServerScriptService/Modules/XPAdjust.lua
local SSS = game:GetService("ServerScriptService")
local Modules = SSS:WaitForChild("Modules")

local GamepassService = require(Modules:WaitForChild("GamepassService"))
local Admins          = require(Modules:WaitForChild("Admins"))
local FeatureFlags    = require(Modules:WaitForChild("FeatureFlags"))

local XPAdjust = {}

function XPAdjust.Adjust(plr, amount)
    amount = tonumber(amount) or 0
    if amount <= 0 then return 0 end

    local mult = 1
    if FeatureFlags.DoubleXP then
        if (GamepassService.HasDoubleXP and GamepassService.HasDoubleXP(plr.UserId)) or Admins.IsAdmin(plr.UserId) then
            mult = 2
        end
    end
    return amount * mult
end

return XPAdjust
